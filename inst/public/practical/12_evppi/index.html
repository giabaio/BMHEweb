<!DOCTYPE html><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.3.0 for Hugo" />
  

  
  









  




  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&family=Inconsolata:wght@400;500;600;700&display=swap&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&family=Inconsolata:wght@400;500;600;700&display=swap&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Gianluca Baio" />

  
  
  
    
  
  <meta name="description" content="Website for Bayesian methods in health economics" />

  
  <link rel="alternate" hreflang="en-us" href="/practical/12_evppi/" />

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css" integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.3ef10ad94e43ba7ad3f08b0b007578ae.css" />

  



  

  

  




  
  
  

  
    <link rel="alternate" href="/practical/12_evppi/index.xml" type="application/rss+xml" title="Bayesian methods in health economics" />
  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu62751289ff52b250e581ec75f909b74a_9702_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu62751289ff52b250e581ec75f909b74a_9702_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="/practical/12_evppi/" />

  
  
  
  
  
  
  
  
    
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="Bayesian methods in health economics" />
  <meta property="og:url" content="/practical/12_evppi/" />
  <meta property="og:title" content="Practical 12: Computing the EVPPI in BCEA and SAVI | Bayesian methods in health economics" />
  <meta property="og:description" content="Website for Bayesian methods in health economics" /><meta property="og:image" content="/media/logo_hu1963fc62d5b8fe503cce6274f5cb00c3_9765_300x300_fit_lanczos_3.png" />
    <meta property="twitter:image" content="/media/logo_hu1963fc62d5b8fe503cce6274f5cb00c3_9765_300x300_fit_lanczos_3.png" /><meta property="og:locale" content="en-us" />
  
    
  

  



  

  





  <title>Practical 12: Computing the EVPPI in BCEA and SAVI | Bayesian methods in health economics</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="8ded6a794db03755569c53bfe430f03c" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.da42964e270e05a6063fbca894d7ccff.js"></script>

  




  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu1963fc62d5b8fe503cce6274f5cb00c3_9765_0x70_resize_lanczos_3.png" alt="Bayesian methods in health economics"
          
          ></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu1963fc62d5b8fe503cce6274f5cb00c3_9765_0x70_resize_lanczos_3.png" alt="Bayesian methods in health economics"
        
        ></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#timetable"><span>Timetable</span></a>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Slides</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/slides/01_Intro"><span>Introduction</span></a>
            
              <a class="dropdown-item" href="/slides/02_MCMC"><span>Bayesian computation</span></a>
            
              <a class="dropdown-item" href="/slides/03_Intro_HE"><span>Introduction to Health Economics</span></a>
            
              <a class="dropdown-item" href="/slides/04_ILD"><span>Individual level data</span></a>
            
              <a class="dropdown-item" href="/slides/05_ALD"><span>Aggregated level data</span></a>
            
              <a class="dropdown-item" href="/slides/06_NMA"><span>Network meta-analysis</span></a>
            
              <a class="dropdown-item" href="/slides/07_Model_uncertainty"><span>Model error and structural analysis</span></a>
            
              <a class="dropdown-item" href="/slides/08_Survival"><span>Survival modelling in HTA</span></a>
            
              <a class="dropdown-item" href="/slides/09_MM"><span>Markov models</span></a>
            
              <a class="dropdown-item" href="/slides/10_Missing"><span>Missing data in HTA</span></a>
            
              <a class="dropdown-item" href="/slides/11_VoI"><span>Introduction to Value of information</span></a>
            
              <a class="dropdown-item" href="/slides/12_EVPPI"><span>Expected value of partial information</span></a>
            
              <a class="dropdown-item" href="/syllabus/lecture13/13_EVSI.pdf"><span>Expected value of sample information</span></a>
            
              <a class="dropdown-item" href="/syllabus/lecture14/14_Data_EVSI.pdf"><span>Generating data for the analysis of the EVSI</span></a>
            
              <a class="dropdown-item" href="/syllabus/lecture15/15_EVSI_MC.pdf"><span>Calculating expected value of sample information</span></a>
            
              <a class="dropdown-item" href="/syllabus/lecture16/16_EVSI_regression.pdf"><span>Regression-based EVSI</span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Practicals</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/practical/01_monte-carlo"><span>Monte Carlo</span></a>
            
              <a class="dropdown-item" href="/practical/02_mcmc"><span>MCMC</span></a>
            
              <a class="dropdown-item" href="/practical/03_bcea"><span>Cost-effectiveness analysis</span></a>
            
              <a class="dropdown-item" href="/practical/04_ild"><span>HTA with individual level data</span></a>
            
              <a class="dropdown-item" href="/practical/05_ald"><span>Evidence synthesis and decision models</span></a>
            
              <a class="dropdown-item" href="/practical/06_nma"><span>NMA</span></a>
            
              <a class="dropdown-item" href="/practical/07_structural"><span>PSA to structural uncertainty</span></a>
            
              <a class="dropdown-item" href="/practical/08_survival"><span>Survival analysis</span></a>
            
              <a class="dropdown-item" href="/practical/09_mm"><span>Markov and multistate models</span></a>
            
              <a class="dropdown-item" href="/practical/10_missing"><span>Missing data</span></a>
            
              <a class="dropdown-item" href="/practical/11_intro_voi"><span>Computing the EVPI using Monte Carlo</span></a>
            
              <a class="dropdown-item" href="/practical/12_evppi"><span>Computing the EVPPI in BCEA and SAVI</span></a>
            
              <a class="dropdown-item" href="/practical/13_data_evsi"><span>Generating data for the EVSI</span></a>
            
              <a class="dropdown-item" href="/practical/14_evsi_mc"><span>Computing the EVSI using Monte Carlo</span></a>
            
              <a class="dropdown-item" href="/practical/15_evsi_regression"><span>Computing the EVSI using regression</span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Instructions</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/tips/computer-specification"><span>Computer specification</span></a>
            
              <a class="dropdown-item" href="/tips/using-bugs"><span>Using BUGS</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/publication"><span>Reading list</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>People</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      
        
      
        
      
        
      

      
      

      
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/practical/"></a></li>
    
      


  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/01_monte-carlo/">1. Monte Carlo</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/01_monte-carlo/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/02_mcmc/">2. MCMC</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/02_mcmc/solutions/">Solutions</a></li>



  <li class=""><a href="/practical/02_mcmc/covid/">Covid</a></li>



  <li class=""><a href="/practical/02_mcmc/tutorial/">MCMC Tutorial</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/03_bcea/">3. Intro-HE</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/03_bcea/solutions/">Solution</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/04_ild/">4. ILD</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/04_ild/tutorial-regression/">Regression Tutorial</a></li>



  <li class=""><a href="/practical/04_ild/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/05_ald/">5. ALD</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/05_ald/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/06_nma/">6. NMA</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/06_nma/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/07_structural/">7. PSA to structural uncertainty</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/07_structural/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/08_survival/">8. Survival</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/08_survival/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/09_mm/">9. Markov models</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/09_mm/solutions/">Solutions</a></li>



  <li class=""><a href="/practical/09_mm/cohort-model/">Cohort discrete Markov model</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/10_missing/">10. Missing data</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a href="/practical/10_missing/solutions/">Solutions</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/11_intro_voi/">11. EVPI using MC</a>
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link  active" href="/practical/12_evppi/">12. EVPPI in BCEA &amp; SAVI</a>
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/13_data_evsi/">13 Generating data for EVSI</a>
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/14_evsi_mc/">14. EVSI using MC</a>
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
        <a class="docs-toc-link " href="/practical/15_evsi_regression/">15. EVSI using regression</a>
    

    
      </div>
    

      
    

    
      </ul>
    

  
</nav>
    </div>

    <main class="col-10 docs-content" role="main">
      <article class="article">

        <div class="docs-article-container">
          <h1>Practical 12: Computing the EVPPI in BCEA and SAVI</h1>
          
          
          
          
          




<div class="btn-links mb-3">
  
  








  


















  
  
  
    
  
  
  
  
  
    
    
      
    
  
  <a class="btn btn-outline-primary btn-page-header" href="/slides/12_EVPPI" >
    Lecture 12</a>

  
  
  
    
  
  
  
  
  
    
    
      
    
  
  <a class="btn btn-outline-primary btn-page-header" href="/practical/12_evppi/practical12.pdf" >
    <i class="fas fa-file-pdf mr-1"></i>PDF version</a>


</div>


          <br>
          
          <div class="article-style">
            
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<div id="relevant-literature" class="section level2">
<h2>Relevant literature</h2>
<blockquote>
<p><em>Partial EVPI:</em></p>
<p>Strong M, Oakley JE, Brennan A. <a href="http://mdm.sagepub.com/content/34/3/311">Estimating multi-parameter partial Expected Value of Perfect Information from a
probabilistic sensitivity analysis sample: a non-parametric regression approach</a> <em>Medical Decision Making</em>. 2014; <strong>34(3)</strong>:311-26.</p>
<p><em>Review of methods for the computation of the EVPPI</em></p>
<p>Heath A, Manoloupolou I, Baio G. <a href="http://journals.sagepub.com/doi/abs/10.1177/">A Review of Methods for the Analysis of the Expected Value of Information</a>. <em>Medical Decision Making</em>. 2017</p>
<p><em>Computing the EVPPI using INLA</em></p>
<p>Heath A, Manolopoulou I, Baio G. <a href="http://onlinelibrary.wiley.com/doi/10.1002/sim.6983/full">Estimating the expected value of partial perfect information in health
economic evaluations using Integrated Nested Laplace Approximation</a>. <em>Statistics in Medicine</em>. 2016;</p>
</blockquote>
</div>
<div id="case-study-1---model-description" class="section level2">
<h2>Case study 1 - Model description</h2>
<p>The model for the first part of this practical is based on the hypothetical three-state Markov model used for illustrative purposes in Strong et al (2013).</p>
<p>The model predicts the net benefit, <span class="math inline">\(\mbox{NB}_t(\boldsymbol\theta)\)</span>, under two decision options (<span class="math inline">\(t=1,2\)</span>), over a time horizon of 20 time cycles — as usual, <span class="math inline">\(\boldsymbol\theta\)</span> is the vector of all model parameters. Patients are assumed to be in one of three states: responding to treatment, not responding, or dead. The figure below illustrates that all transitions are allowed except out of the absorbing state, dead.</p>
<p><img src="/practical/12_evppi/_index_files/markov-model.png" style="width:35.0%" /></p>
<p>The model can be written as
<span class="math display">\[\begin{align}
\mbox{NB}_1(\boldsymbol\theta) &amp;= \left\{\sum_{n=1}^{20} \left(\boldsymbol{S}_1^{\text T} \boldsymbol{M}_1^{n} \boldsymbol{U}_1 \right) +\theta_{8}\theta_{9}\theta_{10}\right\} K -(\theta_{1} + \theta_{2}\theta_{3}\theta_{4}),\\
\mbox{NB}_2(\boldsymbol\theta)&amp;=  \left\{\sum_{n=1}^{20} \left(\boldsymbol{S}_2^{\text T} \boldsymbol{M}_2^{n} \boldsymbol{U}_2 \right)+\theta_{17}\theta_{18}\theta_{19}\right\}K- (\theta_{11}+ \theta_{12}\theta_{13}\theta_{4}),
\end{align}\]</span>
where the vectors <span class="math inline">\(\boldsymbol{S}_t\)</span> and <span class="math inline">\(\boldsymbol{U}_t\)</span> are defined as <span class="math inline">\(\boldsymbol{S}_1=(\theta_5,1-\theta_5,0)^{\text T}\)</span>, <span class="math inline">\(\boldsymbol{S}_2=(\theta_{14},1-\theta_{14},0)^{\text T}\)</span>, <span class="math inline">\(\boldsymbol{U}_1=(\theta_6,0,0)^{\text T}\)</span> and <span class="math inline">\(\boldsymbol{U}_2=(\theta_{15},0,0)^{\text T}\)</span> and where each parameter <span class="math inline">\(\phi\)</span> is defined in the Table below. The value of one unit of health benefit, <span class="math inline">\(K\)</span>, is £10,000 / QALY. The transition matrices <span class="math inline">\(\boldsymbol{M}_1\)</span> and <span class="math inline">\(\boldsymbol{M}_2\)</span> are defined as
<span class="math display">\[\begin{equation}
\boldsymbol{M}_1 = \left( \begin{array}{ccc}
\theta_{20}&amp;\theta_{21}&amp;\theta_{22}\\
\theta_{23}&amp;\theta_{24}&amp;\theta_{25}\\
0&amp;0&amp;1
\end{array}\right) \; \mathrm{and}\;
\boldsymbol{M}_2= \left( \begin{array}{ccc}
\theta_{26}&amp;\theta_{27}&amp;\theta_{28}\\
\theta_{29}&amp;\theta_{30}&amp;\theta_{31}\\
0&amp;0&amp;1
\end{array}\right).
\end{equation}\]</span></p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Parameter
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Mean (sd)
</div>
</th>
</tr>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
<span class="math inline">\(t=0\)</span>
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
<span class="math inline">\(t=1\)</span>
</div>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Drug Cost (£, <span class="math inline">\(\theta_{1},\theta_{11}\)</span>)
</td>
<td style="text-align:left;">
1000 (1)
</td>
<td style="text-align:left;">
1500 (1)
</td>
</tr>
<tr>
<td style="text-align:left;">
Probability of Admission (<span class="math inline">\(\theta_2,\theta_{12}\)</span>)
</td>
<td style="text-align:left;">
0.1 (0.02)
</td>
<td style="text-align:left;">
0.08 (0.02)
</td>
</tr>
<tr>
<td style="text-align:left;">
Days in Hospital (<span class="math inline">\(\theta_3,\theta_{13}\)</span>)
</td>
<td style="text-align:left;">
5.2 (1)
</td>
<td style="text-align:left;">
6.1 (1)
</td>
</tr>
<tr>
<td style="text-align:left;">
Hospital Cost per Day (£, <span class="math inline">\(\theta_4\)</span>)
</td>
<td style="text-align:left;">
400 (200)
</td>
<td style="text-align:left;">
400 (200)
</td>
</tr>
<tr>
<td style="text-align:left;">
Probability of Responding (<span class="math inline">\(\theta_5,\theta_{14}\)</span>)
</td>
<td style="text-align:left;">
0.7 (0.1)
</td>
<td style="text-align:left;">
0.8 (0.1)
</td>
</tr>
<tr>
<td style="text-align:left;">
Utility Change due to Response (<span class="math inline">\(\theta_6,\theta_{15}\)</span>)
</td>
<td style="text-align:left;">
0.3 (0.1)
</td>
<td style="text-align:left;">
0.3 (0.05)
</td>
</tr>
<tr>
<td style="text-align:left;">
Duration of Response (years, <span class="math inline">\(\theta_7,\theta_{16}\)</span>)
</td>
<td style="text-align:left;">
3 (0.5)
</td>
<td style="text-align:left;">
3 (1)
</td>
</tr>
<tr>
<td style="text-align:left;">
Probability of Side Effects (<span class="math inline">\(\theta_8,\theta_{17}\)</span>)
</td>
<td style="text-align:left;">
0.25 (0.1)
</td>
<td style="text-align:left;">
0.2 (0.05)
</td>
</tr>
<tr>
<td style="text-align:left;">
Utility Change due to Side Effects (<span class="math inline">\(\theta_9,\theta_{18}\)</span>)
</td>
<td style="text-align:left;">
-0.1 (0.02)
</td>
<td style="text-align:left;">
-0.1 (0.02)
</td>
</tr>
<tr>
<td style="text-align:left;">
Duration of Side Effects (years, <span class="math inline">\(\theta_{10},\theta_{19}\)</span>)
</td>
<td style="text-align:left;">
0.5 (0.2)
</td>
<td style="text-align:left;">
0.5 (0.2)
</td>
</tr>
</tbody>
</table>
</div>
<div id="overall-evpi" class="section level2">
<h2>Overall EVPI</h2>
<div id="start-r" class="section level3">
<h3>Start R</h3>
<p>Start <code>R</code> and set the working directory to the folder that contains the course materials.</p>
<p>Note that the symbol <code>#</code> comments out code in <code>R</code>, i.e. anything following a # character in the code chunks below will not be run.</p>
</div>
<div id="read-values-in-r" class="section level3">
<h3>Read values in R</h3>
<p>The model has been run and a PSA of size 10,000 stored in the <code>.csv</code> file <a href="psa_model_1.csv"><code>psa_model_1.csv</code></a>. You can read this into <code>R</code> with:</p>
<pre class="r"><code>psa &lt;- read.csv(&quot;psa_model_1.csv&quot;)
head(psa)
dim(psa)</code></pre>
<p>In this model, effects are measured in QALYs, and costs in £. Define <span class="math inline">\(K\)</span>, the value of one QALY as £<span class="math inline">\(10,000\)</span>. Calculate net benefits and the incremental net benefit.</p>
<pre class="r"><code>K &lt;- 10000
nb1 &lt;- psa$effects1 * K - psa$costs1
nb2 &lt;- psa$effects2 * K - psa$costs2
inb &lt;- nb2 - nb1</code></pre>
<p>Examine the mean net benefits and mean incremental net benefit.</p>
<pre class="r"><code>mean(nb1)
mean(nb2)
mean(inb)</code></pre>
</div>
<div id="calculate-overall-evpi" class="section level3">
<h3>Calculate overall EVPI</h3>
<p>The overall EVPI is given by
<span class="math display">\[\begin{equation}
\mbox{EVPI} = \mbox{E}_\theta\left[ \max_t \mbox{NB}_t(\boldsymbol\theta)\right] -  \max_t \mbox{E}_\theta \left[\mbox{NB}_t(\boldsymbol\theta)\right],
\end{equation}\]</span>
where <span class="math inline">\(\mbox{NB}_t(\boldsymbol\theta)\)</span> is the model function, and <span class="math inline">\(\boldsymbol\theta = (\theta_1, \ldots, \theta_{31})\)</span>.
This has Monte Carlo estimator
<span class="math display">\[\begin{equation}
\widehat{\mbox{EVPI}} = \frac{1}{N}\sum_{n=1}^N \max_t \mbox{NB}_t(\boldsymbol\theta^{(n)}) -  \max_t \frac{1}{N}\sum_{n=1}^N \mbox{NB}_t(\boldsymbol\theta^{(n)}),
\end{equation}\]</span>
where <span class="math inline">\(\boldsymbol\theta^{(n)}\)</span> is a draw from the joint distribution <span class="math inline">\(p(\boldsymbol\theta)\)</span>.</p>
<p>We can evaluate this Monte Carlo estimator for EVPI in <code>R</code> using the following expression:<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<pre class="r"><code>EVPI &lt;- mean(pmax(nb1, nb2)) - max(mean(nb1), mean(nb2)) 
EVPI

# equivalently, we can calculate EVPI using the incremental net benefit. 
# This is useful later when we use regression to estimate EVPPI.
EVPI &lt;- mean(pmax(0, inb)) - max(0, mean(inb))
EVPI</code></pre>
</div>
</div>
<div id="partial-evpi-via-regression" class="section level2">
<h2>Partial EVPI via regression</h2>
<p>Firstly, we’ll show how partial EVPI for a single parameter is calculated in a simple two decision option problem. We’ll use a generalised additive model, implemented in the <code>mgcv</code> <code>R</code> package.</p>
<p>We’ll calculate partial EVPI for <span class="math inline">\(\theta_5\)</span>.
First we need to load the <code>mgcv</code> library<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> that contains the <code>gam</code> function, and then run the GAM model:</p>
<pre class="r"><code>library(mgcv)
theta &lt;- psa[,1:31]
model &lt;- gam(inb ~ s(theta[, 5]))</code></pre>
<p>Here, we also define the matrix <code>theta</code>, which contains all the simulations for the model parameters (stored in the first 31 columns of the matrix <code>psa</code>). When using the <code>s()</code> syntax the default spline type is the <code>thin plate regression' spline. See</code>?s` for more details.</p>
<p>Check the model residuals</p>
<pre class="r"><code>plot(fitted(model), residuals(model))</code></pre>
<p>and more visual checks are generated by <code>gam.check</code>.</p>
<pre class="r"><code>gam.check(model)</code></pre>
<p>As you can see, this function produces some output relating to the optimisation process and the model fit. The function also produces a series of diagnostic plots. The most critical is the upper right, which should be a mean zero scatter of plots with no obvious structure. We can tolerate a degree of heteroskedasticity since this should not bias the model fitted values. Normality of residuals is less critical (top left plot). For more information see the help pages via typing <code>?gam.check</code>.</p>
<p>We then extract the model fitted values using <code>fitted(model)</code> and then calculate partial EVPI via</p>
<pre class="r"><code>fittedValues &lt;- fitted(model)
evppi_theta5 &lt;- mean(pmax(0, fittedValues)) - max(0, mean(fittedValues))
evppi_theta5</code></pre>
<div id="partial-evpi-of-each-parameter-in-turn" class="section level3">
<h3>Partial EVPI of each parameter in turn</h3>
<p>If we wanted to estimate the partial EVPI of each parameter in turn we could do this by writing a <code>for</code> loop.</p>
<pre class="r"><code># initialise a vector to hold the results. 
evppi_vector &lt;- numeric(31)

for (i in (1:31)[-c(7, 16)]) { # theta 7 and 16 are not defined
   print(i)
    parameter_of_interest &lt;- theta[, i]
    model &lt;- gam(inb ~ s(parameter_of_interest))
    fittedValues &lt;- fitted(model)
    evppi_vector[i] &lt;- mean(pmax(0, fittedValues)) - max(0, mean(fittedValues))
}

names(evppi_vector) &lt;- paste(&quot;theta&quot;, 1:31)
print(round(evppi_vector[-c(7, 16)], 1))</code></pre>
<p>We can put this on a barchart with</p>
<pre class="r"><code>x.points &lt;- barplot(evppi_vector, ylab = &quot;partial EVPI&quot;, xaxt = &quot;n&quot;, ylim = c(0, 500))
axis(side = 1, at = x.points, labels = names(evppi_vector), tick = FALSE, hadj = 0.8, las = 3)</code></pre>
<p>The syntax for this plot is not straightforward if you are unfamiliar with <code>R</code>. One of the great things about <code>R</code> is the flexibility in creating plots, but the flexibility comes at a cost in terms of complexity of syntax.</p>
</div>
<div id="partial-evpi-of-groups-of-parameters" class="section level3">
<h3>Partial EVPI of groups of parameters</h3>
<p>Now we will calculate partial EVPI of groups of parameters. First, let’s calculate EVPI for <span class="math inline">\(\theta_5\)</span> and <span class="math inline">\(\theta_{14}\)</span>. Note that we now include the parameters within the <code>te()</code> smoothing function (this function generates a tensor product of marginal smooth functions and allows for interactions between the parameters). The problem with this is that struggles to cope with more than about five parameters within the <code>te()</code> function (see lecture slides).</p>
<pre class="r"><code>model &lt;- gam(inb ~ te(theta[, 5], theta[, 14]))
fittedValues &lt;- fitted(model)
mean(pmax(0, fittedValues)) - max(0, mean(fittedValues))</code></pre>
<p>Check the model residuals.</p>
<pre class="r"><code>gam.check(model)</code></pre>
<p>Now, let’s calculate EVPI for the group <span class="math inline">\((\theta_{5}\)</span>, <span class="math inline">\(\theta_{6}\)</span>, <span class="math inline">\(\theta_{14}, \theta_{15})\)</span>.
Even with four parameters it is quite slow.</p>
<pre class="r"><code>system.time(model &lt;- gam(inb ~ te(theta[, 5], theta[, 6], theta[, 14], theta[, 15])))
fittedValues &lt;- fitted(model)
mean(pmax(0, fittedValues)) - max(0, mean(fittedValues))
gam.check(model)</code></pre>
<p>Some alternative non-parametric regression approaches include neural networks, projection pursuit regression, Gaussian process regression and multivariate adaptive regression splines (MARS). A fast and efficient implementation of MARS regression is available in the <code>earth</code> package in <code>R</code><a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<pre class="r"><code>library(earth)

# theta 5, 6, 14, 15
system.time(model &lt;- earth(theta[, c(5, 6, 14, 15)], inb, degree = 10, nk = 1000, thres = 1e-3))
fittedValues &lt;- fitted(model)
mean(pmax(0, fittedValues)) - max(0, mean(fittedValues))
plot(fitted(model), residuals(model))

# theta 20 to theta 31
system.time(model &lt;- earth(theta[, 20:31], inb, degree = 10, nk = 1000, thres = 1e-3))
fittedValues &lt;- fitted(model)
mean(pmax(0, fittedValues)) - max(0, mean(fittedValues))
plot(fitted(model), residuals(model))</code></pre>
<p>Try some different groups.</p>
</div>
</div>
<div id="partial-evpi-if-there-are-more-than-two-decision-options" class="section level2">
<h2>Partial EVPI if there are more than two decision options</h2>
<p>Now let’s imagine we have three decision options rather than two. The file <a href="psa_model_2.csv"><code>psa_model_2.csv</code></a> contains a set of 10,000 PSA samples from a model for a three-decision option problem. In the file are 19 input parameters, and costs and effects for each of the three decision options.</p>
<p>Import the PSA sample and create objects for costs, effects and the parameters.</p>
<pre class="r"><code># first remove the objects from the previous analysis, to be safe... 
rm(theta, nb1, nb2, inb, model, psa)

psa &lt;- read.csv(&quot;psa_model_2.csv&quot;)
head(psa)
dim(psa)

costs &lt;- psa[, grep(&quot;costs&quot;, names(psa))] # grep matches text strings
effects &lt;- psa[, grep(&quot;effects&quot;, names(psa))]
theta &lt;- psa[, grep(&quot;theta&quot;, names(psa))]

dim(costs)
dim(effects)
dim(theta)

K &lt;- 10000 # set K to 10000 again</code></pre>
<p>Calculate absolute net benefits and incremental net benefits versus option 1.</p>
<pre class="r"><code>nb &lt;- effects * K - costs
inb &lt;- nb - nb[, 1]
    
colMeans(nb)
colMeans(inb)</code></pre>
<p>Which is now the best option, and what is the overall EVPI?</p>
<p>We use the function <code>pmax</code> again to find the maximum net benefit for each row of the PSA. The <code>do.call</code> allows us to use the function <code>pmax</code> with an arbitrary number of columns (here, there are three). It is very fast and efficient, but don’t worry about the syntax (unless you are interested!).</p>
<pre class="r"><code>inb &lt;- as.data.frame(inb) # convert to data.frame so do.call works
mean(do.call(pmax, inb)) - max(colMeans(inb))</code></pre>
<p>For a single parameter partial EVPI (e.g. for <span class="math inline">\(\theta_5\)</span>) we now have two incremental net benefits, and therefore we need two GAM regression models. We therefore do:</p>
<pre class="r"><code>model_2v1 &lt;- gam(inb[, 2] ~ s(theta[, 5]))
model_3v1 &lt;- gam(inb[, 3] ~ s(theta[, 5]))

fittedValues &lt;- data.frame(
  fittedValue_1v1 = 0, # note that the incremental NB of option 1 vs 1 is zero
  fittedValue_2v1 = fitted(model_2v1), 
  fittedValue_3v1 = fitted(model_3v1)
)

mean(do.call(pmax, fittedValues)) - max(colMeans(fittedValues))</code></pre>
<p>Calculate partial EVPI for all 19 input parameters.</p>
<p>Next, try some groups.</p>
<pre class="r"><code># first with gam
model_2v1 &lt;- gam(inb[, 2] ~ te(theta[, 5], theta[, 6], theta[, 7]))
model_3v1 &lt;- gam(inb[, 3] ~ te(theta[, 5], theta[, 6], theta[, 7]))

fittedValues &lt;- data.frame(
  fittedValue_1v1 = 0, # note that the incremental NB of option 1 vs 1 is zero
  fittedValue_2v1 = fitted(model_2v1), 
  fittedValue_3v1 = fitted(model_3v1)
)

mean(do.call(pmax, fittedValues)) - max(colMeans(fittedValues))

# or use earth
model_2v1 &lt;- earth(theta[, c(5, 6, 7)], inb[, 2], degree = 10, nk = 1000, thres = 1e-3)
model_3v1 &lt;- earth(theta[, c(5, 6, 7)], inb[, 3], degree = 10, nk = 1000, thres = 1e-3)

fittedValues &lt;- data.frame(
  fittedValue_1v1 = 0, # note that the incremental NB of option 1 vs 1 is zero
  fittedValue_2v1 = fitted(model_2v1), 
  fittedValue_3v1 = fitted(model_3v1)
)

mean(do.call(pmax, fittedValues)) - max(colMeans(fittedValues))</code></pre>
<p>Try some other groups.</p>
</div>
<div id="using-bcea-to-calculate-evppi" class="section level2">
<h2>Using <code>BCEA</code> to calculate EVPPI</h2>
<p>First, we need to load <code>BCEA</code> to the <code>R</code> workspace.</p>
<pre class="r"><code>library(BCEA)</code></pre>
<p>Then, we create a <code>bcea</code> object from the costs and QALYs.</p>
<pre class="r"><code>bceaObject &lt;- bcea(e = as.matrix(effects), c = as.matrix(costs), ref = 1, wtp = 10000, plot = FALSE)
# note that the bcea function requires matrices as inputs, not data frames!</code></pre>
<p>Check out the help page <code>?bcea</code> to see what the various options are.</p>
<p>Calculate EVPPI for <span class="math inline">\(\theta_5\)</span>, including checking the residual plots.</p>
<pre class="r"><code>&gt; evppiObject &lt;- evppi(5, theta, bceaObject)
&gt; diag.evppi(evppiObject, bceaObject, int = 1)
&gt; diag.evppi(evppiObject, bceaObject, int = 2)
&gt; evppiObject$evppi</code></pre>
<p>Check out the help page <code>?evppi</code> to see all the various options. Try a range of different parameters.</p>
<p>Before we calculate groups we are going to reduce the PSA size to avoid lengthy computations in the practical session.</p>
<p>Create a new <code>bcea</code> object from the costs and QALYs.</p>
<pre class="r"><code>&gt; bceaObject &lt;- bcea(e = as.matrix(effects[1:1000, ]), c = as.matrix(costs[1:1000, ]), ref = 1, wtp = 10000, plot = FALSE)</code></pre>
<p>Calculate EVPPI for the group <span class="math inline">\(\theta_5, \theta_6, \theta_7\)</span> via the GAM method.</p>
<pre class="r"><code>&gt; evppiObject &lt;- evppi(c(5, 6, 7), theta[1:1000, ], bceaObject, method = &quot;GAM&quot;)
&gt; diag.evppi(evppiObject, bceaObject, int = 1)
&gt; diag.evppi(evppiObject, bceaObject, int = 2)
&gt; evppiObject$evppi</code></pre>
<p>The GAM method will only work for groups of up to five inputs.</p>
</div>
<div id="web-apps-for-value-of-information-calculations" class="section level2">
<h2>Web-apps for value of information calculations</h2>
<p>Regression-based methods for calculating EVPPI are currently implemented in two user-friendly web applications:
Gianluca Baio and Anna Heath’s <a href="https://egon.stats.ucl.ac.uk/projects/BCEAweb/"><code>BCEAweb</code></a>, and Mark Strong’s <a href="http://savi.shef.ac.uk/SAVI/"><code>SAVI</code></a>. In each case the PSA sample is uploaded to the web-app, and server-side <code>R</code> code is used to generate model summaries and value of information results. The results can then be downloaded in a report.</p>
<p>There any many similarities between the applications. Two key differences are that <code>SAVI</code> is available to download as a stand alone web-app that can be run locally on your own machine, whereas <code>BCEAweb</code> has functionality for checking regression diagnostics.</p>
</div>
<div id="using-savi-bceaweb-to-calculate-evppi" class="section level2">
<h2>Using <code>SAVI</code> / <code>BCEAweb</code> to calculate EVPPI</h2>
<p>We’ve included instructions for using <code>SAVI</code> in this practical, but you could equally use <code>BCEAweb</code>. There are csv files containing PSA results in the right format for upload to <code>SAVI</code> and <code>BCEAweb</code> in the course materials.</p>
<div id="download-local-version-of-savi" class="section level3">
<h3>Download local version of <code>SAVI</code></h3>
<p>To avoid overloading the version of <code>SAVI</code> hosted on the web, download <code>SAVI</code> for your own machine (<code>BCEAweb</code> should be better able to cope with multiple concurrent users). First install the <code>devtools</code> package, which is then used to download and install the <code>SAVI</code> package from <code>GitHub</code>.</p>
<pre class="r"><code>install.packages(&#39;devtools&#39;)
library(devtools)
install_github(&#39;Sheffield-Accelerated-VoI/SAVI-package&#39;)</code></pre>
<p>Windows users may be prompted to install <code>Rtools</code>. You do not need <code>Rtools</code> to install <code>SAVI</code>. You may be prompted to install other package dependencies.</p>
<p>The <code>SAVI</code> report download feature requires <code>Pandoc</code>, which can be downloaded and installed from <a href="http://pandoc.org/">http://pandoc.org/</a>. <code>Pandoc</code> is not essential for the rest of <code>SAVI</code> to work.</p>
<p>To start <code>SAVI</code>, load the library and type <code>SAVI()</code>.</p>
<pre class="r"><code>library(SAVI)
SAVI()</code></pre>
<p><code>SAVI</code> should then open in your machine’s default web browser. Any analysis you do is processed entirely on your own machine. Once downloaded, the <code>R</code> package version of <code>SAVI</code> does not require an internet~connection.</p>
</div>
<div id="prepare-psa-files" class="section level3">
<h3>Prepare PSA files</h3>
<p><code>SAVI</code> requires three files that contain the results of the PSA analysis: a parameter file that records the sampled values of all the input parameters of the model, a file that contains the costs for each decision option, and a file that contains the health effects (typically QALYs).</p>
<p>Each file must be in csv format. <code>SAVI</code> assumes that the first row of the parameter file contains the parameter names. <code>SAVI</code> assumes that the first row of the costs file holds the decision option names. The first row of the effects file should also hold names, but these names are not used by <code>SAVI</code>.</p>
<p>The <code>.csv</code> files must each have the same number of rows, and the rows must correspond, i.e. the parameters in row 1 must be those that correspond to the costs and effects in row 1, and so on.</p>
<p>Costs and effects are assumed to be per-person, and to be absolute rather than incremental (i.e. there must be the same number of columns as decision options, including the baseline decision).</p>
</div>
<div id="the-about-your-model-tab" class="section level3">
<h3>The “About Your Model” tab</h3>
<p>The “About Your Model” tab allows users to set the following:</p>
<ul>
<li>Model name</li>
<li>The threshold value of one unit of health effect, <span class="math inline">\(\lambda\)</span> (often indicated by <span class="math inline">\(k\)</span>, in the rest of the material) — defults to 20,000</li>
<li>Definition of effectiveness measure (e.g. discounted lifetime QALYs)</li>
<li>Definition of cost measure (e.g. discounted lifetime £)</li>
<li>Annual prevalence (for calculation of population EVPI / EVPPI)</li>
<li>Time horizon (for calculation of population EVPI / EVPPI)</li>
<li>Currency units used for costs (e.g. £)</li>
<li>Units used for benefits (e.g. QALYs)</li>
<li>Name of jurisdiction (e.g. country, region, city)</li>
</ul>
<p>With the exception of <span class="math inline">\(\lambda\)</span>, these settings only affect the labels on figures and in tables on the <code>SAVI</code> web page and in the <code>SAVI</code> downloadable report. Changing <span class="math inline">\(\lambda\)</span> during a <code>SAVI</code> session will cause the PSA, EVPI, and single parameter EVPI results to update. Group EVPI results do not update at present.</p>
</div>
<div id="the-import-files-tab" class="section level3">
<h3>The “Import Files” tab</h3>
<p>Upload the three files on this tab: parameters, cost and effects.</p>
<p>This tab also contains download buttons for three test files. These test files were generated from the same model that was used as case study 1 in our partial EVPI paper in <a href="http://mdm.sagepub.com/content/34/3/311">Medical Decision Making</a>.</p>
</div>
<div id="the-check-upload-tab" class="section level3">
<h3>The “Check Upload” tab</h3>
<p>The first five rows of each dataset are shown here. On the list of things to do is to add more detail about each file (number of columns and number of rows).</p>
</div>
<div id="the-psa-results-tab" class="section level3">
<h3>The “PSA Results” tab</h3>
<p>Clicking on this tab will cause <code>SAVI</code> to calculate a range of summary measures and construct a number of figures (the CE plane, CEAC and net benefit density plots).</p>
<p>The user has the option to select the intervention and the comparator for display on the cost-effectiveness plane.</p>
<p>Summary tables can be downloaded as <code>.csv</code> files.</p>
<p>All tables and figures appear in the <code>SAVI</code> report, available from the “Report” tab.</p>
</div>
<div id="the-evpi-tab" class="section level3">
<h3>The “EVPI” tab</h3>
<p>Overall EVPI is calculated, both in cost units and health effect units. Figures showing EVPI against <span class="math inline">\(\lambda\)</span> are constructed.</p>
</div>
<div id="the-evpi-single-parameters-tab" class="section level3">
<h3>The “EVPI Single Parameters” tab</h3>
<p>Clicking this tab tells <code>SAVI</code> to calculate the partial EVPI for each parameter, along with the standard error of the approximation. The standard error relates to the sampling uncertainty due to a finite PSA sample. Increasing the number of rows in the PSA will reduce the standard errors.</p>
</div>
<div id="the-evpi-groups-tab" class="section level3">
<h3>The “EVPI Groups” tab</h3>
<p>Groups of parameters can be selected using this tab. For groups of up to four parameters GAM regression is used to compute partial EVPI. For groups of five or more parameters GP regression is used. There is more detail about these methods in our MDM paper.</p>
<p>Note that GP regression can be relatively slow (a few minutes) compared with the GAM regression. The larger the number of parameters in the group, the slower the computation. The larger the number of PSA samples, again, the slower the computation. At present the GP regression method uses only the first 7,500 rows<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> of the PSA due to computational constraints<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>.</p>
</div>
<div id="the-report-tab" class="section level3">
<h3>The “Report” tab</h3>
<p>A report that contains all the tables and figures from SAVI can be downloaded using the download button on this tab. The options for download format are <code>.pdf</code>, <code>.html</code> and <code>.doc</code> for the online version of <code>SAVI</code>, and <code>.html</code> and <code>.doc</code> for the downloadable version of <code>SAVI</code>.</p>
<p>As mentioned above, <code>Pandoc</code> is requred for the download feature to work.</p>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>To learn about <code>pmax</code> type <code>?pmax</code> at the <code>R</code> console.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>A library only needs to be loaded once during each <code>R</code> session<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The term “MARS” is trademarked, hence “earth”!<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>5,000 rows on the local version of <code>SAVI</code>.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>The need to invert an <span class="math inline">\(n\)</span> x <span class="math inline">\(n\)</span> matrix where <span class="math inline">\(n\)</span> is the number of rows in the PSA.<a href="#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="post-nav">
  
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          
          

          


          
          
          
          
          


          




          




        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    
    
      &copy;  2022-2024 &middot;

    Based on
    <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a>
    
    
    (version 5.3.0)
    
    for <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a> &middot;
    
    
    <i><b>Latest update: 23 Jun 2022 </i></b>
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    <script src="/js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js"></script>

    
    
    
      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    <script src="/en/js/wowchemy.min.50d3bf3df0c53b31631bb48a62b35f92.js"></script>

    






</body>
</html>
